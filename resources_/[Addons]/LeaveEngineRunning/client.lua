RestrictEmer=false;keepDoorOpen=true;local a=false;function ShowNotification(b)SetNotificationTextEntry("STRING")AddTextComponentString(b)DrawNotification(false,false)end;Citizen.CreateThread(function()while true do Citizen.Wait(0)local c=GetPlayerPed(-1)local d=GetVehiclePedIsIn(c,false)if not a then if IsPedInAnyVehicle(c,true)then ShowNotification("Maintenez ~b~F ~w~ à la sortie du véhicule, pour laisser le moteur en marche.")a=true end end;if RestrictEmer then if GetVehicleClass(d)==18 then if IsPedInAnyVehicle(c,false)and IsControlPressed(2,75)and not IsEntityDead(c)then Citizen.Wait(150)if IsPedInAnyVehicle(c,false)and IsControlPressed(2,75)and not IsEntityDead(c)then SetVehicleEngineOn(d,true,true,false)if keepDoorOpen then TaskLeaveVehicle(c,d,256)else TaskLeaveVehicle(c,d,0)end end end end else if IsPedInAnyVehicle(c,false)and IsControlPressed(2,75)and not IsEntityDead(c)then Citizen.Wait(150)if IsPedInAnyVehicle(c,false)and IsControlPressed(2,75)and not IsEntityDead(c)then SetVehicleEngineOn(d,true,true,false)if keepDoorOpen then TaskLeaveVehicle(c,d,256)else TaskLeaveVehicle(c,d,0)end end end end end end)
 
